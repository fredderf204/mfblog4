<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="How to use SSML with Azure AI Speech service to convert text to speech"><title>Using SSML with Azure AI Speech service</title>
<link rel=canonical href=https://mfblog.au/p/using-ssml-with-azure-ai-speech-service/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Using SSML with Azure AI Speech service"><meta property='og:description' content="How to use SSML with Azure AI Speech service to convert text to speech"><meta property='og:url' content='https://mfblog.au/p/using-ssml-with-azure-ai-speech-service/'><meta property='og:site_name' content='MF Azure Blog'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Azure AI Speech'><meta property='article:tag' content='Text to Speech'><meta property='article:tag' content='SSML'><meta property='article:published_time' content='2023-12-14T13:27:03+11:00'><meta property='article:modified_time' content='2023-12-14T13:27:03+11:00'><meta property='og:image' content='https://mfblog.au/p/using-ssml-with-azure-ai-speech-service/cover.jpeg'><meta name=twitter:title content="Using SSML with Azure AI Speech service"><meta name=twitter:description content="How to use SSML with Azure AI Speech service to convert text to speech"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://mfblog.au/p/using-ssml-with-azure-ai-speech-service/cover.jpeg'><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-C4H16BVKJJ"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-C4H16BVKJJ")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/me_hu8008747913738786229.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>‚òÅÔ∏è</span></figure><div class=site-meta><h1 class=site-name><a href=/>MF Azure Blog</a></h1><h2 class=site-description>Short musings found while working with Azure | Opinions are my own</h2></div></header><ol class=menu-social><li><a href=https://github.com/fredderf204 target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/1michaelfriedrich/ target=_blank title=Linkedin rel=me><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg></a></li><li><a href=https://twitter.com/fredderf204 target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#tldr>TLDR</a></li><li><a href=#what-is-azure-ai-speech-service>What is Azure AI Speech service</a></li><li><a href=#what-is-ssml>What is SSML</a></li><li><a href=#how-to-use-ssml-with-azure-ai-speech-service>How to use SSML with Azure AI Speech service</a></li><li><a href=#sample-code>Sample code</a></li><li><a href=#how-am-i-using-this>How am I using this</a></li><li><a href=#conclusion>Conclusion</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/using-ssml-with-azure-ai-speech-service/><img src=/p/using-ssml-with-azure-ai-speech-service/cover_hu4858750990455468998.jpeg srcset="/p/using-ssml-with-azure-ai-speech-service/cover_hu4858750990455468998.jpeg 800w, /p/using-ssml-with-azure-ai-speech-service/cover_hu7271068196858883539.jpeg 1600w" width=800 height=800 loading=lazy alt="Featured image of post Using SSML with Azure AI Speech service"></a></div><div class=article-details><header class=article-category><a href=/categories/azure/>Azure
</a><a href=/categories/ai/>AI</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/using-ssml-with-azure-ai-speech-service/>Using SSML with Azure AI Speech service</a></h2><h3 class=article-subtitle>How to use SSML with Azure AI Speech service to convert text to speech</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Dec 14, 2023</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>6 minute read</time></div></footer></div></header><section class=article-content><p>I have recently created a webpage that takes news articles from places like <a class=link href=https://azurefeeds.com/ target=_blank rel=noopener>Azure Feeds</a> and creates a daily summary of them using <a class=link href=https://azure.microsoft.com/en-us/products/ai-services/openai-service target=_blank rel=noopener>Azure Open AI</a>, which you can read about <a class=link href=https://fredderf204.github.io/mfblog4/p/ai-generated-azure-news-summary/ target=_blank rel=noopener>here</a>. But I want to make these summaries multi-modal and have them read out to me, so I can listen to them on the go. So I thought I&rsquo;d use <a class=link href=https://azure.microsoft.com/en-us/services/cognitive-services/speech-services/ target=_blank rel=noopener>Azure AI Speech</a> to convert the text to speech.</p><h2 id=tldr>TLDR</h2><ul><li>What is Azure AI Speech service</li><li>What is SSML</li><li>How to use SSML with Azure AI Speech service</li><li>Sample code</li></ul><h2 id=what-is-azure-ai-speech-service>What is Azure AI Speech service</h2><p><a class=link href=https://azure.microsoft.com/en-us/services/cognitive-services/speech-services/ target=_blank rel=noopener>Azure AI Speech</a> is a collection of speech-to-text and text-to-speech APIs that enables developers to add speech capabilities to their applications. It supports 125 languages and variants, and 60+ standard and custom voice fonts.</p><h2 id=what-is-ssml>What is SSML</h2><p><a class=link href=https://www.w3.org/TR/speech-synthesis/ target=_blank rel=noopener>Speech Synthesis Markup Language (SSML)</a> is an XML-based markup language that provides a standard way to mark up text for the generation of synthetic speech. SSML is a W3C specification that is supported by all major speech synthesis engines.</p><p>Microsoft has a great article <a class=link href=https://learn.microsoft.com/en-us/azure/ai-services/speech-service/speech-synthesis-markup target=_blank rel=noopener>here</a> on SSML and it&rsquo;s primary use cases.</p><ul><li>Controlling pronunciation</li><li>Choosing the voice</li><li>Define the input text structure</li></ul><p>Controlling the pronunciation can bee really useful if you work in a domain/industry that has a lot of acronyms or jargon. For example, I work in the IT industry and Microsoft, where there are a lot of acronyms. So I can use SSML to tell Azure AI Speech how to pronounce them correctly.</p><p>Choosing the voice is almost my favourite part. I love looking through the catalog of voices and choosing the one that I like the most. For the Azure AI Speech service, you can choose from 60+ standard and custom voice fonts. To find out what standard voices are available in your region, you can run the below command in your shell;</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl --location --request GET <span class=s1>&#39;https://southeastasia.tts.speech.microsoft.com/cognitiveservices/voices/list&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--header <span class=s1>&#39;Ocp-Apim-Subscription-Key: xxxx-yyyy-zzzz&#39;</span> <span class=p>|</span> jq <span class=s1>&#39;.[] | select(.Locale | contains (&#34;en-NZ&#34;))&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>The above command sends a GET request to <a class=link href=https://southeastasia.tts.speech.microsoft.com/cognitiveservices/voices/list target=_blank rel=noopener>https://southeastasia.tts.speech.microsoft.com/cognitiveservices/voices/list</a>, then pipes the output to jq, which is a lightweight and flexible command-line JSON processor. The jq command filters the output to only show the voices that are available in the en-NZ locale.</p><p>Please replace southeastasia with the region that you have deployed your Speech service to and replace the Ocp-Apim-Subscription-Key with your key. You can find your key in the Azure portal under your Speech service resource.</p><p>You can also change the locale to the one that you want to use and you will get a list of voices that are available for you to use.</p><blockquote><p>üíé And what&rsquo;s even better, you can train a custom neural voice if you wish <a class=link href=https://learn.microsoft.com/en-us/azure/ai-services/speech-service/custom-neural-voice target=_blank rel=noopener>https://learn.microsoft.com/en-us/azure/ai-services/speech-service/custom-neural-voice</a> or create a personal AI generated replication of your voice <a class=link href=https://learn.microsoft.com/en-us/azure/ai-services/speech-service/personal-voice-overview target=_blank rel=noopener>https://learn.microsoft.com/en-us/azure/ai-services/speech-service/personal-voice-overview</a>.</p></blockquote><h2 id=how-to-use-ssml-with-azure-ai-speech-service>How to use SSML with Azure AI Speech service</h2><p>I am new to Azure AI Speech service and SSML. The best way I have found to interact with Azure AI Speech service is to use the <a class=link href=https://speech.microsoft.com/ target=_blank rel=noopener>Speech Studio</a>. Once in there find the Text to speech section, then select Audio Content creation.</p><p><img src=/p/using-ssml-with-azure-ai-speech-service/1.jpg width=1148 height=634 srcset="/p/using-ssml-with-azure-ai-speech-service/1_hu2517780787718769033.jpg 480w, /p/using-ssml-with-azure-ai-speech-service/1_hu14945864059224025288.jpg 1024w" loading=lazy alt="Speech Studio" class=gallery-image data-flex-grow=181 data-flex-basis=434px></p><p>Next you can create a new file or folder. Click on new Text file.</p><p>Once in the editor you can enter your text and then select the voice that you want to use. At this point, if you don&rsquo;t want to use SSML you don&rsquo;t have to. You can just use the default experience and happily create an audio file from text. But if you want to use SSML, you can click on the SSML button and enter your SSML code.</p><p><img src=/p/using-ssml-with-azure-ai-speech-service/2.jpg width=1182 height=654 srcset="/p/using-ssml-with-azure-ai-speech-service/2_hu16918050583229917772.jpg 480w, /p/using-ssml-with-azure-ai-speech-service/2_hu13132619000443075414.jpg 1024w" loading=lazy alt="Speech Studio" class=gallery-image data-flex-grow=180 data-flex-basis=433px></p><p>Once you have entered your SSML code, you can click on the play button to hear what it sounds like. If you are happy with it, you can then click on the export button to download the audio file, plain text or the SSML code.</p><p><img src=/p/using-ssml-with-azure-ai-speech-service/3.jpg width=1176 height=661 srcset="/p/using-ssml-with-azure-ai-speech-service/3_hu6952675382275594320.jpg 480w, /p/using-ssml-with-azure-ai-speech-service/3_hu9249413881495056993.jpg 1024w" loading=lazy alt="Speech Studio" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><h2 id=sample-code>Sample code</h2><p>Now that I have some familiarity with Azure AI Speech service and SSML, I can now use it in my code. I have created a simple Python script that takes a string as input and converts it to an audio file using Azure AI Speech service. It then saves the audio into Azure BLOB storage as an MP3.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>azure.cognitiveservices.speech</span> <span class=k>as</span> <span class=nn>speechsdk</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>azure.storage.blob</span> <span class=kn>import</span> <span class=n>BlobServiceClient</span><span class=p>,</span> <span class=n>BlobClient</span><span class=p>,</span> <span class=n>ContainerClient</span><span class=p>,</span> <span class=n>ContentSettings</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Connect to Azure BLOB storage</span>
</span></span><span class=line><span class=cl><span class=n>storageaccount</span> <span class=o>=</span> <span class=s1>&#39;DefaultEndpointsProtocol=https;AccountName=aaa-bbb-ccc;AccountKey=xxx-yyy-zzz==;EndpointSuffix=core.windows.net&#39;</span>
</span></span><span class=line><span class=cl><span class=n>blob_service_client</span> <span class=o>=</span> <span class=n>BlobServiceClient</span><span class=o>.</span><span class=n>from_connection_string</span><span class=p>(</span><span class=n>storageaccount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Creates an instance of a speech config with specified subscription key and service region.</span>
</span></span><span class=line><span class=cl><span class=n>speech_key</span><span class=p>,</span> <span class=n>service_region</span> <span class=o>=</span> <span class=s2>&#34;ddd-eee-fff&#34;</span><span class=p>,</span> <span class=s2>&#34;australiaeast&#34;</span>
</span></span><span class=line><span class=cl><span class=n>speech_config</span> <span class=o>=</span> <span class=n>speechsdk</span><span class=o>.</span><span class=n>SpeechConfig</span><span class=p>(</span><span class=n>subscription</span><span class=o>=</span><span class=n>speech_key</span><span class=p>,</span> <span class=n>region</span><span class=o>=</span><span class=n>service_region</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create ssml string</span>
</span></span><span class=line><span class=cl><span class=n>ssml_string</span> <span class=o>=</span> <span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>&lt;speak xmlns=&#34;http://www.w3.org/2001/10/synthesis&#34; xmlns:mstts=&#34;http://www.w3.org/2001/mstts&#34; xmlns:emo=&#34;http://www.w3.org/2009/10/emotionml&#34; version=&#34;1.0&#34; xml:lang=&#34;en-US&#34;&gt;&lt;voice name=&#34;en-US-GuyNeural&#34;&gt;&lt;s /&gt;&lt;mstts:express-as style=&#34;newscast&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s1>Hello and welcome to the daily AI Generated News Summary for Thursday 8th December 2024 . I&#39;m your host Guy and here are today&#39;s headlines
</span></span></span><span class=line><span class=cl><span class=s1>&lt;/mstts:express-as&gt;&lt;s /&gt;&lt;/voice&gt;
</span></span></span><span class=line><span class=cl><span class=s1>&lt;voice name=&#34;en-US-JennyNeural&#34;&gt;&lt;mstts:express-as style=&#34;newscast&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s1>Thanks Guy. I&#39;m Jenny and today we have a new article by azurefeeds entitled hello
</span></span></span><span class=line><span class=cl><span class=s1>&lt;/mstts:express-as&gt;&lt;/voice&gt;&lt;/speak&gt;
</span></span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Send string to Azure speech service</span>
</span></span><span class=line><span class=cl><span class=n>speech_synthesizer</span> <span class=o>=</span> <span class=n>speechsdk</span><span class=o>.</span><span class=n>SpeechSynthesizer</span><span class=p>(</span><span class=n>speech_config</span><span class=o>=</span><span class=n>speech_config</span><span class=p>,</span> <span class=n>audio_config</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>speech_synthesizer</span><span class=o>.</span><span class=n>speak_ssml</span><span class=p>(</span><span class=n>ssml_string</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get audio data</span>
</span></span><span class=line><span class=cl><span class=n>audio_data</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>audio_data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Upload audio to Azure BLOB storage</span>
</span></span><span class=line><span class=cl><span class=n>mp3upload</span> <span class=o>=</span> <span class=n>blob_service_client</span><span class=o>.</span><span class=n>get_blob_client</span><span class=p>(</span><span class=n>container</span><span class=o>=</span><span class=s1>&#39;20231211&#39;</span><span class=p>,</span> <span class=n>blob</span><span class=o>=</span><span class=n>today</span> <span class=o>+</span> <span class=s1>&#39;.mp3&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>mp3upload</span><span class=o>.</span><span class=n>upload_blob</span><span class=p>(</span><span class=n>audio_data</span><span class=p>,</span> <span class=n>overwrite</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>content_settings</span><span class=o>=</span><span class=n>ContentSettings</span><span class=p>(</span><span class=n>content_type</span><span class=o>=</span><span class=s1>&#39;audio/mpeg&#39;</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>üíé To test out this code, you can create the SSML in the Speech Studio and then copy and paste it the SSML into the ssml_string variable.</p></blockquote><h2 id=how-am-i-using-this>How am I using this</h2><p>I have added this process into my Azure Function that creates the daily summary of Azure news. As you can see above, I tried to make it sound like a News desk by having a host (Guy) and a presenter (Jenny). So in my code, I have Guy do a little intro, then I have Jenny read all of the articles, then I have Guy do a little outro. You can see my full code here: <a class=link href=https://github.com/fredderf204/ai-gen-news-summary/blob/main/html-email/__init__.py target=_blank rel=noopener>https://github.com/fredderf204/ai-gen-news-summary/blob/main/html-email/<strong>init</strong>.py</a> and I have a put a snippet below;</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>blob_service_client</span> <span class=o>=</span> <span class=n>BlobServiceClient</span><span class=o>.</span><span class=n>from_connection_string</span><span class=p>(</span><span class=n>storageaccount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>today</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>today</span><span class=p>()</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%Y%m</span><span class=si>%d</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>dow</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%A&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>dateword</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%B </span><span class=si>%d</span><span class=s1>, %Y&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>container_client</span> <span class=o>=</span> <span class=n>blob_service_client</span><span class=o>.</span><span class=n>get_container_client</span><span class=p>(</span><span class=n>today</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>ssml_string</span> <span class=o>=</span> <span class=s2>&#34;&lt;speak xmlns=</span><span class=se>\&#34;</span><span class=s2>http://www.w3.org/2001/10/synthesis</span><span class=se>\&#34;</span><span class=s2> xmlns:mstts=</span><span class=se>\&#34;</span><span class=s2>http://www.w3.org/2001/mstts</span><span class=se>\&#34;</span><span class=s2> xmlns:emo=</span><span class=se>\&#34;</span><span class=s2>http://www.w3.org/2009/10/emotionml</span><span class=se>\&#34;</span><span class=s2> version=</span><span class=se>\&#34;</span><span class=s2>1.0</span><span class=se>\&#34;</span><span class=s2> xml:lang=</span><span class=se>\&#34;</span><span class=s2>en-US</span><span class=se>\&#34;</span><span class=s2>&gt;&lt;voice name=</span><span class=se>\&#34;</span><span class=s2>en-US-GuyNeural</span><span class=se>\&#34;</span><span class=s2>&gt;&lt;s /&gt;&lt;mstts:express-as style=</span><span class=se>\&#34;</span><span class=s2>newscast</span><span class=se>\&#34;</span><span class=s2>&gt;Hello and welcome to the daily AI Generated News Summary for &#34;</span> <span class=o>+</span> <span class=n>dow</span> <span class=o>+</span> <span class=s2>&#34; &#34;</span> <span class=o>+</span> <span class=n>dateword</span> <span class=o>+</span> <span class=s2>&#34;. I&#39;m your host Guy&lt;/mstts:express-as&gt;&lt;s /&gt;&lt;/voice&gt;&lt;voice name=</span><span class=se>\&#34;</span><span class=s2>en-US-JennyNeural</span><span class=se>\&#34;</span><span class=s2>&gt;&lt;mstts:express-as style=</span><span class=se>\&#34;</span><span class=s2>newscast</span><span class=se>\&#34;</span><span class=s2>&gt;And I&#39;m Jenny. Here are your headlines for today.&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>bloblist</span> <span class=o>=</span> <span class=n>container_client</span><span class=o>.</span><span class=n>list_blobs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>blob</span> <span class=ow>in</span> <span class=n>bloblist</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>logging</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>blob</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>blob_client</span> <span class=o>=</span> <span class=n>container_client</span><span class=o>.</span><span class=n>get_blob_client</span><span class=p>(</span><span class=n>blob</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>downloader</span> <span class=o>=</span> <span class=n>blob_client</span><span class=o>.</span><span class=n>download_blob</span><span class=p>(</span><span class=n>max_concurrency</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;UTF-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>blob_text</span> <span class=o>=</span> <span class=n>downloader</span><span class=o>.</span><span class=n>readall</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>blob_text_json</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>blob_text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>ssml_string</span> <span class=o>+=</span> <span class=s2>&#34;The next article is entitled &#34;</span> <span class=o>+</span> <span class=n>blob_text_json</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;title&#39;</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34; and was published on &#34;</span> <span class=o>+</span> <span class=n>blob_text_json</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;author&#39;</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34;. Here is the summary &#34;</span> <span class=o>+</span> <span class=n>blob_text_json</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;summary&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>ssml_string</span> <span class=o>+=</span> <span class=s1>&#39;&lt;/mstts:express-as&gt;&lt;s /&gt;&lt;/voice&gt;&lt;voice name=&#34;en-US-GuyNeural&#34;&gt;&lt;mstts:express-as style=&#34;newscast&#34;&gt;Thanks Jenny. That</span><span class=se>\&#39;</span><span class=s1>s all from the news desk today. Thanks for listening and have a great day.&lt;/mstts:express-as&gt;&lt;/voice&gt;&lt;/speak&gt;&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>speech_config</span> <span class=o>=</span> <span class=n>speechsdk</span><span class=o>.</span><span class=n>SpeechConfig</span><span class=p>(</span><span class=n>subscription</span><span class=o>=</span><span class=n>speech_key</span><span class=p>,</span> <span class=n>region</span><span class=o>=</span><span class=n>service_region</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>speech_synthesizer</span> <span class=o>=</span> <span class=n>speechsdk</span><span class=o>.</span><span class=n>SpeechSynthesizer</span><span class=p>(</span><span class=n>speech_config</span><span class=o>=</span><span class=n>speech_config</span><span class=p>,</span> <span class=n>audio_config</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>speech_synthesizer</span><span class=o>.</span><span class=n>speak_ssml</span><span class=p>(</span><span class=n>ssml_string</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>audio_data</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>audio_data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>mp3upload</span> <span class=o>=</span> <span class=n>blob_service_client</span><span class=o>.</span><span class=n>get_blob_client</span><span class=p>(</span><span class=n>container</span><span class=o>=</span><span class=n>today</span><span class=p>,</span> <span class=n>blob</span><span class=o>=</span><span class=n>today</span> <span class=o>+</span> <span class=s1>&#39;.mp3&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>mp3upload</span><span class=o>.</span><span class=n>upload_blob</span><span class=p>(</span><span class=n>audio_data</span><span class=p>,</span> <span class=n>overwrite</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>content_settings</span><span class=o>=</span><span class=n>ContentSettings</span><span class=p>(</span><span class=n>content_type</span><span class=o>=</span><span class=s1>&#39;audio/mpeg&#39;</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=conclusion>Conclusion</h2><p>I hope this article gives you to confidence and some ideas on how you can use SSML with Azure AI Speech service. I am really enjoying learning about Azure AI Speech service and SSML and I am looking forward to using it more in the future.</p><p>I hope you found this post useful. If you have any questions, feel free to reach out to me on <a class=link href=https://twitter.com/fredderf204 target=_blank rel=noopener>Twitter</a> or <a class=link href=https://www.linkedin.com/in/1michaelfriedrich/ target=_blank rel=noopener>Linkedin</a>.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/azure-ai-speech/>Azure AI Speech</a>
<a href=/tags/text-to-speech/>Text to Speech</a>
<a href=/tags/ssml/>SSML</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/part-2-simple-gen-ai-product-recommendation-system/><div class=article-image><img src=/p/part-2-simple-gen-ai-product-recommendation-system/cover.d40a3a4a6b22a2f44f45527adcfee6bd_hu17088848604811627793.jpg width=250 height=150 loading=lazy alt="Featured image of post Part 2 - Simple Gen AI Product Recommendation System" data-hash="md5-1Ao6SmsiovRPRVJ63P7mvQ=="></div><div class=article-details><h2 class=article-title>Part 2 - Simple Gen AI Product Recommendation System</h2></div></a></article><article class=has-image><a href=/p/simple-gen-ai-product-recommendation-system-you-can-poc-quickly/><div class=article-image><img src=/p/simple-gen-ai-product-recommendation-system-you-can-poc-quickly/cover.bc1a769b2bf354d8a87d51397f8da7fc_hu16783130262988169499.jpg width=250 height=150 loading=lazy alt="Featured image of post Simple Gen AI Product Recommendation System you can POC quickly" data-hash="md5-vBp2myvzVNiofVE5f42n/A=="></div><div class=article-details><h2 class=article-title>Simple Gen AI Product Recommendation System you can POC quickly</h2></div></a></article><article class=has-image><a href=/p/automated-document-processing-and-fraud-detection-with-azure/><div class=article-image><img src=/p/automated-document-processing-and-fraud-detection-with-azure/cover.8031a5ff034bbf5b0b3d687df799c87e_hu3040367034163266224.jpg width=250 height=150 loading=lazy alt="Featured image of post Automated document processing and fraud detection with Azure" data-hash="md5-gDGl/wNLv1sLPWh995nIfg=="></div><div class=article-details><h2 class=article-title>Automated document processing and fraud detection with Azure</h2></div></a></article><article class=has-image><a href=/p/azure-open-ai-increase-performance-and-reduce-per-call-latency/><div class=article-image><img src=/p/azure-open-ai-increase-performance-and-reduce-per-call-latency/cover.ed3425a2f23159a428dd8655f302d1ee_hu7479023586228177266.jpg width=250 height=150 loading=lazy alt="Featured image of post Azure Open AI - Increase Performance and reduce per call latency" data-hash="md5-7TQlovIxWaQo3YZV8wLR7g=="></div><div class=article-details><h2 class=article-title>Azure Open AI - Increase Performance and reduce per call latency</h2></div></a></article><article class=has-image><a href=/p/ai-generated-azure-news-summary/><div class=article-image><img src=/p/ai-generated-azure-news-summary/cover.64db9f55634ff34eaf2d4d2cb156527c_hu3456839047031088951.jpg width=250 height=150 loading=lazy alt="Featured image of post AI Generated Azure News Summary" data-hash="md5-ZNufVWNP806vLU0ssVZSfA=="></div><div class=article-details><h2 class=article-title>AI Generated Azure News Summary</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=fredderf204/mfblog4-giscus data-repo-id=R_kgDOK5HFPw data-category=Announcements data-category-id=DIC_kwDOK5HFP84Cbspg data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark")}})()</script><footer class=site-footer><section class=copyright>&copy;
2023 -
2024 MF Azure Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.27.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>